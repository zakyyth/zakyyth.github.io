<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laanqari Aisha High School - Excellence in Education</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ===== CSS Variables ===== */
    :root {
      --primary: #667eea;
      --primary-dark: #5568d3;
      --secondary: #764ba2;
      --accent: #f093fb;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --info: #3b82f6;
      --dark: #1e293b;
      --light: #f8fafc;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      --gradient-1: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      --gradient-2: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      --gradient-3: linear-gradient(to right, #667eea, #764ba2);
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      --radius-sm: 0.375rem;
      --radius: 0.5rem;
      --radius-md: 0.75rem;
      --radius-lg: 1rem;
      --radius-xl: 1.5rem;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* ===== Reset & Base ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--light);
      color: var(--gray-900);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ===== Glassmorphism Utilities ===== */
    .glass {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .glass-dark {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* ===== Animated Background ===== */
    .animated-bg {
      background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #667eea);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ===== Floating Particles ===== */
    .particles {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      top: 0;
      left: 0;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      animation: float 20s infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
    }

    /* ===== Login Page ===== */
    .login-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      position: relative;
      overflow: hidden;
      padding: 20px;
    }

    .login-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-2);
      z-index: 0;
    }

    .login-box {
      background: white;
      padding: 3rem 2.5rem;
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-xl);
      max-width: 480px;
      width: 100%;
      position: relative;
      z-index: 1;
      animation: slideUpFade 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    @keyframes slideUpFade {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .login-header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    .login-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      background: var(--gradient-1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      box-shadow: var(--shadow-lg);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .login-header h1 {
      color: var(--gray-900);
      font-family: 'Poppins', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: var(--gradient-3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .login-header p {
      color: var(--gray-600);
      font-size: 1rem;
      font-weight: 500;
    }

    .info-box {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      border: 2px solid rgba(102, 126, 234, 0.2);
      padding: 1rem;
      border-radius: var(--radius-md);
      margin-top: 1rem;
      font-size: 0.875rem;
      color: var(--gray-700);
      line-height: 1.6;
    }

    .info-box strong {
      color: var(--primary);
      font-weight: 600;
    }

    /* ===== User Type Selector ===== */
    .user-type-selector {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .user-type-btn {
      padding: 1rem 0.75rem;
      border: 2px solid var(--gray-200);
      background: white;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--gray-600);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .user-type-btn .icon {
      font-size: 1.5rem;
    }

    .user-type-btn:hover {
      border-color: var(--primary);
      background: rgba(102, 126, 234, 0.05);
      transform: translateY(-2px);
    }

    .user-type-btn.active {
      border-color: var(--primary);
      background: var(--gradient-1);
      color: white;
      box-shadow: var(--shadow-md);
    }

    /* ===== Form Elements ===== */
    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--gray-700);
      font-weight: 600;
      font-size: 0.875rem;
      letter-spacing: 0.025em;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.875rem 1rem 0.875rem 3rem;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-md);
      font-size: 0.9375rem;
      transition: var(--transition);
      background: var(--gray-50);
      font-family: 'Inter', sans-serif;
      color: var(--gray-900);
    }

    .form-group textarea {
      padding: 0.875rem 1rem;
      resize: vertical;
      min-height: 120px;
    }

    .form-group select {
      padding: 0.875rem 1rem;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary);
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-group .input-icon {
      position: absolute;
      left: 1rem;
      top: 2.5rem;
      font-size: 1.25rem;
      color: var(--gray-400);
      transition: var(--transition);
    }

    .form-group input:focus + .input-icon {
      color: var(--primary);
    }

    /* ===== Buttons ===== */
    .btn {
      width: 100%;
      padding: 1rem;
      border: none;
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      font-family: 'Inter', sans-serif;
      letter-spacing: 0.025em;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn:active::before {
      width: 300px;
      height: 300px;
    }

    .btn-primary {
      background: var(--gradient-1);
      color: white;
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    /* ===== Messages ===== */
    .message {
      padding: 1rem;
      border-radius: var(--radius-md);
      margin-bottom: 1.5rem;
      display: none;
      animation: slideInDown 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      font-size: 0.875rem;
      font-weight: 500;
    }

    @keyframes slideInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .message-error {
      background: rgba(239, 68, 68, 0.1);
      color: #dc2626;
      border: 2px solid rgba(239, 68, 68, 0.2);
    }

    .message-success {
      background: rgba(16, 185, 129, 0.1);
      color: #059669;
      border: 2px solid rgba(16, 185, 129, 0.2);
    }

    .login-footer {
      text-align: center;
      margin-top: 2rem;
      color: var(--gray-600);
      font-size: 0.875rem;
    }

    .login-footer a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
    }

    .login-footer a:hover {
      color: var(--primary-dark);
      text-decoration: underline;
    }

    /* ===== Main Website ===== */
    .main-website {
      display: none;
    }

    /* ===== Header ===== */
    header {
      position: relative;
      overflow: hidden;
      padding: 2.5rem 2rem;
      color: white;
    }

    .header-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-2);
      z-index: 0;
    }

    .header-content {
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin: 0 auto;
      text-align: center;
    }

    .header-content h1 {
      font-family: 'Poppins', sans-serif;
      font-size: 3rem;
      font-weight: 800;
      margin-bottom: 0.75rem;
      text-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      animation: fadeInUp 0.8s ease-out;
    }

    .header-content p {
      font-size: 1.25rem;
      opacity: 0.95;
      font-weight: 500;
      animation: fadeInUp 0.8s ease-out 0.2s backwards;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .user-info {
      position: absolute;
      top: 1.5rem;
      right: 2rem;
      background: rgba(255, 255, 255, 0.25);
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 1rem;
      box-shadow: var(--shadow-lg);
    }

    .user-info span {
      font-weight: 700;
      font-size: 0.9375rem;
    }

    .logout-btn {
      background: white;
      color: var(--primary);
      border: none;
      padding: 0.5rem 1.25rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 700;
      font-size: 0.875rem;
      transition: var(--transition);
    }

    .logout-btn:hover {
      background: var(--gray-100);
      transform: scale(1.05);
      box-shadow: var(--shadow-md);
    }

    /* ===== Navigation ===== */
    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background: white;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow);
      padding: 0.5rem;
      gap: 0.5rem;
    }

    nav a {
      color: var(--gray-700);
      padding: 0.875rem 1.75rem;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9375rem;
      transition: var(--transition);
      position: relative;
      cursor: pointer;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 0;
      height: 3px;
      background: var(--gradient-1);
      transform: translateX(-50%);
      transition: width 0.3s ease;
      border-radius: 10px;
    }

    nav a:hover {
      background: rgba(102, 126, 234, 0.05);
      color: var(--primary);
    }

    nav a:hover::after {
      width: 80%;
    }

    nav a.active {
      background: var(--gradient-1);
      color: white;
      box-shadow: var(--shadow-md);
    }

    nav a.active::after {
      display: none;
    }

    /* ===== Notification Badge ===== */
    .notification-badge {
      position: relative;
      display: inline-flex;
    }

    .notification-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: var(--error);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.625rem;
      font-weight: 700;
      animation: bounce 2s infinite;
      box-shadow: var(--shadow-md);
    }

    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    /* ===== Main Content ===== */
    main {
      padding: 3rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
      min-height: calc(100vh - 400px);
    }

    .page {
      display: none;
      animation: pageEnter 0.5s ease-out;
    }

    .page.active {
      display: block;
    }

    @keyframes pageEnter {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      color: var(--gray-900);
      font-family: 'Poppins', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 2.5rem;
      position: relative;
      display: inline-block;
    }

    h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 60px;
      height: 4px;
      background: var(--gradient-1);
      border-radius: 10px;
    }

    /* ===== Stats Container ===== */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.5rem;
      margin: 3rem 0;
    }

    .stat-box {
      background: white;
      padding: 2rem;
      border-radius: var(--radius-xl);
      text-align: center;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      border: 2px solid transparent;
    }

    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--gradient-1);
    }

    .stat-box:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
      border-color: var(--primary);
    }

    .stat-number {
      font-size: 3.5rem;
      font-weight: 800;
      font-family: 'Poppins', sans-serif;
      background: var(--gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
      line-height: 1;
    }

    .stat-label {
      color: var(--gray-600);
      font-size: 1rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* ===== Cards ===== */
    .card {
      background: white;
      padding: 2rem;
      margin: 1.5rem 0;
      box-shadow: var(--shadow-md);
      border-radius: var(--radius-xl);
      transition: var(--transition);
      border-left: 5px solid var(--primary);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-1);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }

    .card:hover::before {
      opacity: 0.03;
    }

    .card > * {
      position: relative;
      z-index: 1;
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
    }

    .card h3 {
      color: var(--gray-900);
      margin-bottom: 1rem;
      font-size: 1.5rem;
      font-weight: 700;
      font-family: 'Poppins', sans-serif;
    }

    .card p {
      color: var(--gray-700);
      line-height: 1.8;
      font-size: 1rem;
    }

    .badge {
      display: inline-block;
      background: var(--gradient-1);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 700;
      margin-top: 1rem;
      margin-right: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      box-shadow: var(--shadow-sm);
    }

    .card-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 2px solid var(--gray-100);
      font-size: 0.875rem;
      color: var(--gray-600);
      font-weight: 500;
    }

    .card-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    .btn-small {
      padding: 0.625rem 1.25rem;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-like {
      background: rgba(239, 68, 68, 0.1);
      color: #dc2626;
      border: 2px solid rgba(239, 68, 68, 0.2);
    }

    .btn-like:hover {
      background: var(--error);
      color: white;
      transform: scale(1.05);
    }

    .btn-like.liked {
      background: var(--error);
      color: white;
      border-color: var(--error);
    }

    .btn-comment {
      background: rgba(59, 130, 246, 0.1);
      color: #2563eb;
      border: 2px solid rgba(59, 130, 246, 0.2);
    }

    .btn-comment:hover {
      background: var(--info);
      color: white;
      transform: scale(1.05);
    }

    .btn-delete {
      background: rgba(249, 115, 22, 0.1);
      color: #ea580c;
      border: 2px solid rgba(249, 115, 22, 0.2);
    }

    .btn-delete:hover {
      background: #ea580c;
      color: white;
      transform: scale(1.05);
    }

    /* ===== Media Elements ===== */
    .media-container {
      margin: 1.5rem 0;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }

    .media-container img,
    .media-container video {
      width: 100%;
      max-height: 500px;
      object-fit: cover;
      display: block;
    }

    /* ===== Comments Section ===== */
    .comments-section {
      margin-top: 1.5rem;
      padding: 1.5rem;
      background: var(--gray-50);
      border-radius: var(--radius-lg);
      display: none;
      border: 2px solid var(--gray-100);
    }

    .comments-section.active {
      display: block;
      animation: slideInDown 0.3s ease-out;
    }

    .comment {
      background: white;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: var(--radius-md);
      border-left: 3px solid var(--primary);
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .comment:hover {
      box-shadow: var(--shadow-md);
      transform: translateX(5px);
    }

    .comment-author {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
      font-size: 0.9375rem;
    }

    .comment-text {
      color: var(--gray-700);
      line-height: 1.6;
    }

    .comment-time {
      font-size: 0.75rem;
      color: var(--gray-500);
      margin-top: 0.5rem;
      font-weight: 500;
    }

    .comment-input {
      width: 100%;
      padding: 0.875rem 1rem;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-md);
      margin-top: 1rem;
      font-family: 'Inter', sans-serif;
      transition: var(--transition);
    }

    .comment-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    /* ===== Floating Action Button ===== */
    .fab {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: var(--gradient-1);
      color: white;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      box-shadow: var(--shadow-xl);
      transition: var(--transition);
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fab:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 30px 60px -12px rgba(102, 126, 234, 0.5);
    }

    /* ===== Modal ===== */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: white;
      margin: 2% auto;
      padding: 2.5rem;
      border-radius: var(--radius-xl);
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
      box-shadow: var(--shadow-xl);
    }

    @keyframes modalSlideUp {
      from { opacity: 0; transform: translateY(50px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .close {
      position: absolute;
      right: 1.5rem;
      top: 1.5rem;
      font-size: 2rem;
      font-weight: 700;
      color: var(--gray-400);
      cursor: pointer;
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close:hover {
      color: var(--error);
      background: rgba(239, 68, 68, 0.1);
      transform: rotate(90deg);
    }

    .modal-content h2 {
      margin-bottom: 2rem;
      font-size: 2rem;
    }

    /* ===== File Upload Preview ===== */
    .media-preview {
      margin-top: 1.5rem;
      padding: 1.5rem;
      background: var(--gray-50);
      border-radius: var(--radius-lg);
      border: 2px dashed var(--gray-300);
    }

    .media-preview img,
    .media-preview video {
      width: 100%;
      max-height: 350px;
      object-fit: cover;
      border-radius: var(--radius-md);
      margin-bottom: 1rem;
    }

    .preview-header {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 0.9375rem;
    }

    /* ===== Notifications ===== */
    .notification-item {
      background: white;
      padding: 1.5rem;
      margin: 1rem 0;
      border-radius: var(--radius-lg);
      border-left: 4px solid var(--primary);
      box-shadow: var(--shadow-md);
      transition: var(--transition);
    }

    .notification-item:hover {
      transform: translateX(8px);
      box-shadow: var(--shadow-lg);
    }

    .notification-item.unread {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(102, 126, 234, 0.05) 100%);
      border-left-color: var(--info);
    }

    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }

    .notification-type {
      font-weight: 700;
      color: var(--primary);
      font-size: 1rem;
    }

    .notification-time {
      font-size: 0.8125rem;
      color: var(--gray-500);
      font-weight: 500;
    }

    .notification-message {
      color: var(--gray-700);
      line-height: 1.6;
      font-size: 0.9375rem;
    }

    .mark-read-btn {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-size: 0.8125rem;
      font-weight: 600;
      transition: var(--transition);
    }

    .mark-read-btn:hover {
      background: var(--primary-dark);
      transform: scale(1.05);
    }

    .clear-all-btn {
      padding: 0.875rem 1.75rem;
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(249, 115, 22, 0.1) 100%);
      color: #dc2626;
      border: 2px solid rgba(239, 68, 68, 0.3);
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 700;
      margin-bottom: 2rem;
      transition: var(--transition);
      font-size: 0.9375rem;
    }

    .clear-all-btn:hover {
      background: var(--error);
      color: white;
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    /* ===== Storage Info Box ===== */
    .storage-info {
      background: var(--gradient-2);
      color: white;
      padding: 2rem;
      border-radius: var(--radius-xl);
      margin-bottom: 2.5rem;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
    }

    .storage-info::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
      background-size: 40px 40px;
      animation: patternMove 30s linear infinite;
    }

    @keyframes patternMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(40px, 40px); }
    }

    .storage-info > * {
      position: relative;
      z-index: 1;
    }

    .storage-info h4 {
      margin-bottom: 1rem;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-family: 'Poppins', sans-serif;
    }

    .storage-info p {
      opacity: 0.95;
      line-height: 1.7;
      font-size: 0.9375rem;
    }

    .storage-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .storage-stat {
      background: rgba(255, 255, 255, 0.2);
      padding: 1.25rem;
      border-radius: var(--radius-lg);
      text-align: center;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: var(--transition);
    }

    .storage-stat:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-4px);
    }

    .storage-stat-value {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      font-family: 'Poppins', sans-serif;
    }

    .storage-stat-label {
      font-size: 0.8125rem;
      opacity: 0.9;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* ===== Footer ===== */
    footer {
      text-align: center;
      padding: 3rem 2rem;
      background: var(--gradient-1);
      color: white;
      margin-top: 5rem;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
    }

    footer p {
      margin: 0.75rem 0;
      font-size: 0.9375rem;
      opacity: 0.95;
    }

    footer a {
      color: white;
      text-decoration: underline;
    }

    /* ===== Loading Spinner ===== */
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 2rem auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ===== Responsive Design ===== */
    @media (max-width: 768px) {
      .header-content h1 {
        font-size: 2rem;
      }

      .header-content p {
        font-size: 1rem;
      }

      .user-info {
        position: static;
        margin: 1rem auto;
        width: fit-content;
      }

      nav {
        flex-direction: column;
        align-items: stretch;
      }

      nav a {
        justify-content: center;
        padding: 1rem;
      }

      h2 {
        font-size: 2rem;
      }

      .stat-number {
        font-size: 2.5rem;
      }

      .fab {
        width: 56px;
        height: 56px;
        font-size: 1.5rem;
        bottom: 1.5rem;
        right: 1.5rem;
      }

      .user-type-selector {
        grid-template-columns: 1fr;
      }

      .login-box {
        padding: 2rem 1.5rem;
      }

      main {
        padding: 2rem 1rem;
      }
    }

    /* ===== Scrollbar Styling ===== */
    ::-webkit-scrollbar {
      width: 12px;
    }

    ::-webkit-scrollbar-track {
      background: var(--gray-100);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--gradient-1);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--gradient-3);
    }

    /* ===== Selection Styling ===== */
    ::selection {
      background: var(--primary);
      color: white;
    }

    ::-moz-selection {
      background: var(--primary);
      color: white;
    }
  </style>
</head>
<body>

<!-- ===== Login Page ===== -->
<div id="loginPage" class="login-container">
  <div class="login-background animated-bg">
    <div class="particles" id="particles"></div>
  </div>
  
  <div class="login-box">
    <div class="login-header">
      <div class="login-icon">ğŸ“</div>
      <h1>Welcome Back!</h1>
      <p>Laanqari Aisha High School Portal</p>
      <div class="info-box">
        ğŸ’¾ <strong>Persistent Storage Active</strong><br>
        Your data is securely saved and will persist across all sessions on this device.
      </div>
    </div>
    
    <div class="user-type-selector">
      <button class="user-type-btn active" onclick="selectUserType('student')">
        <span class="icon">ğŸ‘¨â€ğŸ“</span>
        <span>Student</span>
      </button>
      <button class="user-type-btn" onclick="selectUserType('teacher')">
        <span class="icon">ğŸ‘©â€ğŸ«</span>
        <span>Teacher</span>
      </button>
      <button class="user-type-btn" onclick="selectUserType('admin')">
        <span class="icon">ğŸ”</span>
        <span>Admin</span>
      </button>
    </div>

    <div id="errorMessage" class="message message-error"></div>
    <div id="successMessage" class="message message-success"></div>

    <form id="loginForm" onsubmit="handleLogin(event)">
      <div class="form-group">
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Enter your username" required>
        <span class="input-icon">ğŸ‘¤</span>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password" required>
        <span class="input-icon">ğŸ”’</span>
      </div>

      <button type="submit" class="btn btn-primary">ğŸš€ Sign In</button>
    </form>

    <div class="login-footer">
      <p>
        <a href="#" onclick="showForgotPassword()">Forgot Password?</a> | 
        <a href="#" onclick="showRegisterPage()">Create Account</a>
      </p>
    </div>
  </div>
</div>

<!-- ===== Registration Page ===== -->
<div id="registerPage" class="login-container" style="display:none;">
  <div class="login-background animated-bg">
    <div class="particles" id="particles2"></div>
  </div>
  
  <div class="login-box">
    <div class="login-header">
      <div class="login-icon">ğŸ“</div>
      <h1>Create Account</h1>
      <p>Join Laanqari Aisha High School Portal</p>
    </div>
    
    <div class="user-type-selector">
      <button class="user-type-btn active" onclick="selectRegisterType('student')">
        <span class="icon">ğŸ‘¨â€ğŸ“</span>
        <span>Student</span>
      </button>
      <button class="user-type-btn" onclick="selectRegisterType('teacher')">
        <span class="icon">ğŸ‘©â€ğŸ«</span>
        <span>Teacher</span>
      </button>
    </div>

    <div id="registerError" class="message message-error"></div>
    <div id="registerSuccess" class="message message-success"></div>

    <form id="registerForm" onsubmit="handleRegister(event)">
      <div class="form-group">
        <label for="regFullName">Full Name</label>
        <input type="text" id="regFullName" placeholder="Enter your full name" required>
        <span class="input-icon">ğŸ‘¤</span>
      </div>

      <div class="form-group">
        <label for="regEmail">Email</label>
        <input type="email" id="regEmail" placeholder="Enter your email" required>
        <span class="input-icon">âœ‰ï¸</span>
      </div>

      <div class="form-group">
        <label for="regUsername">Username</label>
        <input type="text" id="regUsername" placeholder="Choose a username" required minlength="4">
        <span class="input-icon">ğŸ‘¤</span>
      </div>

      <div class="form-group">
        <label for="regPassword">Password</label>
        <input type="password" id="regPassword" placeholder="Choose a password" required minlength="6">
        <span class="input-icon">ğŸ”’</span>
      </div>

      <div class="form-group">
        <label for="regConfirmPassword">Confirm Password</label>
        <input type="password" id="regConfirmPassword" placeholder="Confirm your password" required>
        <span class="input-icon">ğŸ”’</span>
      </div>

      <div class="form-group" id="studentIdGroup">
        <label for="regStudentId">Student ID</label>
        <input type="text" id="regStudentId" placeholder="e.g., 2026001, STU12345">
        <span class="input-icon">ğŸ“</span>
      </div>

      <div class="form-group" id="teacherCodeGroup" style="display:none;">
        <label for="regTeacherCode">Teacher Access Code</label>
        <input type="text" id="regTeacherCode" placeholder="Enter teacher access code">
        <span class="input-icon">ğŸ”</span>
      </div>

      <button type="submit" class="btn btn-primary">âœ¨ Create Account</button>
    </form>

    <div class="login-footer">
      <p>Already have an account? <a href="#" onclick="showLoginPage()">Sign In</a></p>
      <p style="font-size: 0.8125rem; color: var(--gray-500); margin-top: 0.75rem;">
        Teacher Access Code: <strong>TEACH2026</strong>
      </p>
    </div>
  </div>
</div>

<!-- ===== Main Website ===== -->
<div id="mainWebsite" class="main-website">
  <header>
    <div class="header-background animated-bg">
      <div class="particles" id="particles3"></div>
    </div>
    <div class="user-info">
      <span id="userDisplay">ğŸ‘¤ Guest</span>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
    <div class="header-content">
      <h1>ğŸ“ Laanqari Aisha High School</h1>
      <p>Excellence in Education Since 2000</p>
    </div>
  </header>

  <nav>
    <a onclick="navigateTo('home')" class="active">ğŸ  Home</a>
    <a onclick="navigateTo('news')">ğŸ“° News</a>
    <a onclick="navigateTo('students')">ğŸ‘¨â€ğŸ“ Students</a>
    <a onclick="navigateTo('teachers')">ğŸ‘©â€ğŸ« Teachers</a>
    <a onclick="navigateTo('contact')">ğŸ“§ Contact</a>
    <a id="notificationsTab" onclick="navigateTo('notifications')" style="display:none;">
      <span class="notification-badge">
        ğŸ”” Notifications
        <span id="notificationCount" class="notification-count" style="display:none;">0</span>
      </span>
    </a>
  </nav>

  <main>
    <!-- ===== Home Page ===== -->
    <div id="homePage" class="page active">
      <h2>Welcome to Our School</h2>
      
      <div class="stats-container">
        <div class="stat-box">
          <div class="stat-number">850</div>
          <div class="stat-label">Students</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">45</div>
          <div class="stat-label">Teachers</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">98%</div>
          <div class="stat-label">Success Rate</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">26</div>
          <div class="stat-label">Years</div>
        </div>
      </div>

      <div class="card">
        <h3>ğŸ“ About Our School</h3>
        <p>Laanqari Aisha High School has been a beacon of excellence in education since 2000. We provide a nurturing environment where students can grow academically, socially, and personally. Our commitment to fostering critical thinking, creativity, and leadership has made us one of the leading educational institutions in the region.</p>
        <span class="badge">Established 2000</span>
        <span class="badge">Excellence</span>
        <span class="badge">Innovation</span>
      </div>

      <div class="card">
        <h3>ğŸ† Our Mission</h3>
        <p>To empower students with knowledge, skills, and values that prepare them for success in an ever-changing world. We strive to create lifelong learners who are compassionate, responsible, and ready to make a positive impact on society.</p>
      </div>

      <div class="card">
        <h3>ğŸŒŸ Our Vision</h3>
        <p>To be the premier educational institution that inspires excellence, innovation, and integrity in every student, preparing them to become leaders and changemakers in a global society.</p>
      </div>
    </div>

    <!-- ===== News Page ===== -->
    <div id="newsPage" class="page">
      <h2>School News & Events</h2>
      <div id="newsContent"></div>
    </div>

    <!-- ===== Students Page ===== -->
    <div id="studentsPage" class="page">
      <h2>Our Students</h2>
      <div id="studentsContent"></div>
    </div>

    <!-- ===== Teachers Page ===== -->
    <div id="teachersPage" class="page">
      <h2>Our Teachers</h2>
      <div id="teachersContent"></div>
    </div>

    <!-- ===== Contact Page ===== -->
    <div id="contactPage" class="page">
      <h2>Contact Us</h2>
      
      <div class="card">
        <h3>ğŸ“ School Address</h3>
        <p><strong>Laanqari Aisha High School</strong><br>
        Chlef Taougrit, Algeria</p>
      </div>

      <div class="card">
        <h3>ğŸ“ Contact Information</h3>
        <p><strong>Phone:</strong> +213-0557522486<br>
        <strong>Email:</strong> info@laanqarischool.edu.dz<br>
        <strong>Office Hours:</strong> Sunday - Thursday, 8:00 AM - 4:00 PM</p>
      </div>

      <div class="card">
        <h3>ğŸ“§ Send us a Message</h3>
        <form onsubmit="handleContactSubmit(event)">
          <div class="form-group">
            <label for="contactName">Your Name</label>
            <input type="text" id="contactName" placeholder="Enter your name" required>
          </div>
          <div class="form-group">
            <label for="contactEmail">Your Email</label>
            <input type="email" id="contactEmail" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label for="contactMessage">Message</label>
            <textarea id="contactMessage" placeholder="Write your message here..." required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">ğŸ“¤ Send Message</button>
        </form>
        <div id="contactFormMessage" class="message message-success" style="margin-top: 1rem;"></div>
      </div>
    </div>

    <!-- ===== Notifications Page ===== -->
    <div id="notificationsPage" class="page">
      <h2>Admin Notifications</h2>
      
      <div class="storage-info">
        <h4>ğŸ’¾ Storage Dashboard</h4>
        <p>All application data is securely stored in your browser's local storage. Data persists across sessions and is automatically saved with every interaction.</p>
        <div class="storage-stats">
          <div class="storage-stat">
            <div class="storage-stat-value" id="totalUsers">0</div>
            <div class="storage-stat-label">Total Users</div>
          </div>
          <div class="storage-stat">
            <div class="storage-stat-value" id="totalPosts">0</div>
            <div class="storage-stat-label">Total Posts</div>
          </div>
          <div class="storage-stat">
            <div class="storage-stat-value" id="totalNotifications">0</div>
            <div class="storage-stat-label">Notifications</div>
          </div>
          <div class="storage-stat">
            <div class="storage-stat-value" id="storageSize">0 KB</div>
            <div class="storage-stat-label">Storage Used</div>
          </div>
        </div>
      </div>
      
      <button class="clear-all-btn" onclick="clearAllNotifications()">ğŸ—‘ï¸ Clear All Notifications</button>
      
      <div id="notificationsContent"></div>
    </div>
  </main>

  <!-- Floating Action Button -->
  <button id="addContentBtn" class="fab" onclick="showAddContentModal()" style="display:none;">+</button>

  <!-- ===== Add Content Modal ===== -->
  <div id="addContentModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddContentModal()">&times;</span>
      <h2>Create New Post</h2>
      
      <form id="addContentForm" onsubmit="handleAddContent(event)">
        <div class="form-group">
          <label for="postCategory">Category</label>
          <select id="postCategory" required>
            <option value="news">ğŸ“° News & Events</option>
            <option value="students">ğŸ‘¨â€ğŸ“ Students</option>
            <option value="teachers">ğŸ‘©â€ğŸ« Teachers</option>
          </select>
        </div>

        <div class="form-group">
          <label for="postTitle">Title</label>
          <input type="text" id="postTitle" placeholder="Enter post title" required>
        </div>

        <div class="form-group">
          <label for="postContent">Content</label>
          <textarea id="postContent" rows="6" placeholder="Write your content here..." required></textarea>
        </div>

        <div class="form-group">
          <label for="postMedia">ğŸ“· Add Photo or Video (Optional)</label>
          <input type="file" id="postMedia" accept="image/*,video/*" onchange="previewMedia(event)">
          <div id="mediaPreview" class="media-preview" style="display:none;">
            <p class="preview-header">Preview:</p>
            <img id="imagePreview" style="display:none;">
            <video id="videoPreview" controls style="display:none;"></video>
            <button type="button" class="btn-small btn-delete" onclick="removeMedia()">âŒ Remove Media</button>
          </div>
        </div>

        <div class="form-group">
          <label for="postTags">Tags (comma separated)</label>
          <input type="text" id="postTags" placeholder="e.g., Important, Upcoming, Featured">
        </div>

        <button type="submit" class="btn btn-primary">ğŸ“¤ Publish Post</button>
      </form>
    </div>
  </div>

  <footer>
    <p><strong>&copy; 2026 Laanqari Aisha High School</strong></p>
    <p>ğŸ“ Chlef Taougrit, Algeria | ğŸ“ +213-0557522486 | âœ‰ï¸ info@laanqarischool.edu.dz</p>
    <p style="margin-top: 1rem; font-size: 0.875rem; opacity: 0.9;">
      Building Tomorrow's Leaders Today
    </p>
  </footer>
</div>

<script>
  // ===== PARTICLES ANIMATION =====
  function createParticles(containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;
    
    for (let i = 0; i < 50; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.width = Math.random() * 5 + 2 + 'px';
      particle.style.height = particle.style.width;
      particle.style.left = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 20 + 's';
      particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
      container.appendChild(particle);
    }
  }

  createParticles('particles');
  createParticles('particles2');
  createParticles('particles3');

  // ===== STORAGE MANAGER =====
  const StorageManager = {
    KEYS: {
      USERS: 'laanqari_users_v2',
      POSTS: 'laanqari_posts_v2',
      NOTIFICATIONS: 'laanqari_notifications_v2',
      SESSION: 'laanqari_session_v2',
      INITIALIZED: 'laanqari_initialized_v2'
    },

    initialize() {
      const isInitialized = localStorage.getItem(this.KEYS.INITIALIZED);
      
      if (!isInitialized) {
        this.save(this.KEYS.USERS, []);
        this.save(this.KEYS.POSTS, this.getDefaultPosts());
        this.save(this.KEYS.NOTIFICATIONS, []);
        localStorage.setItem(this.KEYS.INITIALIZED, 'true');
        console.log('âœ… Storage initialized');
      }
    },

    save(key, data) {
      try {
        localStorage.setItem(key, JSON.stringify(data));
        return true;
      } catch (error) {
        console.error('Storage error:', error);
        return false;
      }
    },

    load(key, defaultValue = null) {
      try {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : defaultValue;
      } catch (error) {
        console.error('Load error:', error);
        return defaultValue;
      }
    },

    remove(key) {
      localStorage.removeItem(key);
    },

    getStorageSize() {
      let total = 0;
      for (let key in localStorage) {
        if (localStorage.hasOwnProperty(key)) {
          total += localStorage[key].length + key.length;
        }
      }
      return (total / 1024).toFixed(2);
    },

    getDefaultPosts() {
      const now = Date.now();
      return [
        {
          id: now + 1,
          category: 'news',
          title: 'ğŸ”¬ Annual Science Fair 2026',
          content: 'We are excited to announce our Annual Science Fair taking place on March 10, 2026. Students from all grades are encouraged to participate and showcase their innovative projects. This year\'s theme is "Innovation for a Sustainable Future." Prizes will be awarded for the top three projects in each category!',
          tags: ['Upcoming', 'Important', 'STEM'],
          author: 'Admin',
          date: new Date('2026-01-25').toISOString(),
          likes: 15,
          likedBy: [],
          comments: []
        },
        {
          id: now + 2,
          category: 'news',
          title: 'âš½ Sports Day Championship',
          content: 'Mark your calendars! Our annual Sports Day Championship is scheduled for April 5, 2026. Join us for a day filled with exciting competitions, team spirit, and athletic excellence. Events include track and field, basketball, soccer, and more. All students and families are welcome!',
          tags: ['Sports', 'April 2026', 'Championship'],
          author: 'Teacher',
          date: new Date('2026-01-28').toISOString(),
          likes: 23,
          likedBy: [],
          comments: []
        },
        {
          id: now + 3,
          category: 'students',
          title: 'â­ Student Spotlight: Emma Zaki',
          content: 'Meet Emma Zaki, our outstanding student in mathematics and computer science. Emma recently won first place in the 2025 Regional Coding Competition with her innovative AI-powered educational app. She maintains a perfect GPA while actively participating in our robotics club and volunteering at the local community center.',
          tags: ['Mathematics', 'Computer Science', 'Achievement'],
          author: 'Admin',
          date: new Date('2026-01-20').toISOString(),
          likes: 42,
          likedBy: [],
          comments: []
        },
        {
          id: now + 4,
          category: 'teachers',
          title: 'ğŸ‘©â€ğŸ« Meet Mrs. Aisha Laanqari',
          content: 'We are proud to introduce Mrs. Aisha Laanqari, our distinguished Mathematics Teacher with 15 years of exceptional teaching experience. Mrs. Laanqari is a recipient of the National Teaching Excellence Award and has mentored numerous students who have gone on to pursue successful careers in STEM fields. Her innovative teaching methods and dedication to student success make her an invaluable member of our faculty.',
          tags: ['Mathematics', '15 Years Experience', 'Excellence Award'],
          author: 'Admin',
          date: new Date('2026-01-15').toISOString(),
          likes: 56,
          likedBy: [],
          comments: []
        }
      ];
    }
  };

  // ===== DATA MANAGER =====
  const DataManager = {
    getUsers() {
      return StorageManager.load(StorageManager.KEYS.USERS, []);
    },

    saveUsers(users) {
      return StorageManager.save(StorageManager.KEYS.USERS, users);
    },

    addUser(user) {
      const users = this.getUsers();
      users.push(user);
      return this.saveUsers(users);
    },

    getPosts() {
      return StorageManager.load(StorageManager.KEYS.POSTS, []);
    },

    savePosts(posts) {
      return StorageManager.save(StorageManager.KEYS.POSTS, posts);
    },

    addPost(post) {
      const posts = this.getPosts();
      posts.unshift(post);
      return this.savePosts(posts);
    },

    deletePost(postId) {
      const posts = this.getPosts().filter(p => p.id !== postId);
      return this.savePosts(posts);
    },

    getNotifications() {
      return StorageManager.load(StorageManager.KEYS.NOTIFICATIONS, []);
    },

    saveNotifications(notifications) {
      return StorageManager.save(StorageManager.KEYS.NOTIFICATIONS, notifications);
    },

    addNotification(notification) {
      const notifications = this.getNotifications();
      notifications.unshift(notification);
      return this.saveNotifications(notifications);
    },

    clearNotifications() {
      return this.saveNotifications([]);
    },

    getSession() {
      return StorageManager.load(StorageManager.KEYS.SESSION, null);
    },

    saveSession(session) {
      return StorageManager.save(StorageManager.KEYS.SESSION, session);
    },

    clearSession() {
      return StorageManager.remove(StorageManager.KEYS.SESSION);
    },

    getStats() {
      return {
        users: this.getUsers().length,
        posts: this.getPosts().length,
        notifications: this.getNotifications().length,
        storageSize: StorageManager.getStorageSize()
      };
    }
  };

  // ===== APPLICATION STATE =====
  let currentUser = null;
  let userType = 'student';
  let registerType = 'student';
  let currentPage = 'home';
  let currentMediaData = null;
  let currentMediaType = null;

  const validCredentials = {
    student: { username: 'student', password: 'student123' },
    teacher: { username: 'teacher', password: 'teacher123' },
    admin: { username: 'admin', password: 'admin123' }
  };

  // ===== AUTHENTICATION =====
  function selectUserType(type) {
    userType = type;
    document.querySelectorAll('#loginPage .user-type-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.closest('.user-type-btn').classList.add('active');
  }

  function selectRegisterType(type) {
    registerType = type;
    document.querySelectorAll('#registerPage .user-type-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.closest('.user-type-btn').classList.add('active');

    if (type === 'student') {
      document.getElementById('studentIdGroup').style.display = 'block';
      document.getElementById('teacherCodeGroup').style.display = 'none';
      document.getElementById('regStudentId').required = true;
      document.getElementById('regTeacherCode').required = false;
    } else {
      document.getElementById('studentIdGroup').style.display = 'none';
      document.getElementById('teacherCodeGroup').style.display = 'block';
      document.getElementById('regStudentId').required = false;
      document.getElementById('regTeacherCode').required = true;
    }
  }

  function showRegisterPage() {
    document.getElementById('loginPage').style.display = 'none';
    document.getElementById('registerPage').style.display = 'flex';
    document.getElementById('registerError').style.display = 'none';
    document.getElementById('registerSuccess').style.display = 'none';
  }

  function showLoginPage() {
    document.getElementById('registerPage').style.display = 'none';
    document.getElementById('loginPage').style.display = 'flex';
    document.getElementById('errorMessage').style.display = 'none';
    document.getElementById('successMessage').style.display = 'none';
  }

  function showForgotPassword() {
    alert('Please contact the school administrator at admin@laanqarischool.edu.dz to reset your password.');
  }

  function handleRegister(event) {
    event.preventDefault();
    
    const fullName = document.getElementById('regFullName').value;
    const email = document.getElementById('regEmail').value;
    const username = document.getElementById('regUsername').value;
    const password = document.getElementById('regPassword').value;
    const confirmPassword = document.getElementById('regConfirmPassword').value;
    const studentId = document.getElementById('regStudentId').value;
    const teacherCode = document.getElementById('regTeacherCode').value;
    
    const errorMsg = document.getElementById('registerError');
    const successMsg = document.getElementById('registerSuccess');
    
    errorMsg.style.display = 'none';
    successMsg.style.display = 'none';

    if (password !== confirmPassword) {
      errorMsg.textContent = 'âŒ Passwords do not match!';
      errorMsg.style.display = 'block';
      return;
    }

    if (password.length < 6) {
      errorMsg.textContent = 'âŒ Password must be at least 6 characters long!';
      errorMsg.style.display = 'block';
      return;
    }

    const users = DataManager.getUsers();
    const existingUser = users.find(u => u.username === username);
    
    if (existingUser || username === 'student' || username === 'teacher' || username === 'admin') {
      errorMsg.textContent = 'âŒ Username already exists!';
      errorMsg.style.display = 'block';
      return;
    }

    if (registerType === 'teacher' && teacherCode !== 'TEACH2026') {
      errorMsg.textContent = 'âŒ Invalid teacher access code!';
      errorMsg.style.display = 'block';
      return;
    }

    const newUser = {
      fullName: fullName,
      email: email,
      username: username,
      password: password,
      type: registerType,
      studentId: registerType === 'student' ? studentId : null,
      createdAt: new Date().toISOString()
    };

    DataManager.addUser(newUser);

    addNotification(
      'New Registration',
      `New ${registerType} registered: ${fullName} (${username})`,
      { username: username, type: registerType, email: email }
    );

    successMsg.textContent = `âœ… Account created successfully! Welcome ${fullName}!`;
    successMsg.style.display = 'block';

    document.getElementById('registerForm').reset();
    
    setTimeout(() => {
      showLoginPage();
      document.getElementById('username').value = username;
    }, 2000);
  }

  function handleLogin(event) {
    event.preventDefault();
    
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const errorMsg = document.getElementById('errorMessage');
    const successMsg = document.getElementById('successMessage');
    
    errorMsg.style.display = 'none';
    successMsg.style.display = 'none';

    const credentials = validCredentials[userType];
    
    if (username === credentials.username && password === credentials.password) {
      currentUser = {
        username: username,
        type: userType,
        displayName: userType.charAt(0).toUpperCase() + userType.slice(1),
        fullName: userType.charAt(0).toUpperCase() + userType.slice(1) + ' User'
      };
      
      addNotification(
        'New Login',
        `${currentUser.fullName} (${userType}) logged in`,
        { username: username, type: userType }
      );
      
      successMsg.textContent = `âœ… Welcome ${currentUser.displayName}!`;
      successMsg.style.display = 'block';
      
      DataManager.saveSession(currentUser);
      
      setTimeout(() => {
        showMainWebsite();
      }, 1500);
      return;
    }

    const users = DataManager.getUsers();
    const registeredUser = users.find(u => 
      u.username === username && u.password === password && u.type === userType
    );

    if (registeredUser) {
      currentUser = {
        username: registeredUser.username,
        type: registeredUser.type,
        displayName: registeredUser.type.charAt(0).toUpperCase() + registeredUser.type.slice(1),
        fullName: registeredUser.fullName,
        email: registeredUser.email
      };
      
      addNotification(
        'New Login',
        `${registeredUser.fullName} (${registeredUser.type}) logged in`,
        { username: username, type: registeredUser.type, email: registeredUser.email }
      );
      
      successMsg.textContent = `âœ… Welcome back ${registeredUser.fullName}!`;
      successMsg.style.display = 'block';
      
      DataManager.saveSession(currentUser);
      
      setTimeout(() => {
        showMainWebsite();
      }, 1500);
    } else {
      errorMsg.textContent = 'âŒ Invalid username or password!';
      errorMsg.style.display = 'block';
    }
  }

  function logout() {
    if (confirm('Are you sure you want to logout?')) {
      if (window.notificationInterval) {
        clearInterval(window.notificationInterval);
      }
      
      currentUser = null;
      DataManager.clearSession();
      
      document.getElementById('mainWebsite').style.display = 'none';
      document.getElementById('loginPage').style.display = 'flex';
      document.getElementById('loginForm').reset();
      document.getElementById('addContentBtn').style.display = 'none';
      document.getElementById('notificationsTab').style.display = 'none';
    }
  }

  function showMainWebsite() {
    document.getElementById('loginPage').style.display = 'none';
    document.getElementById('registerPage').style.display = 'none';
    document.getElementById('mainWebsite').style.display = 'block';
    
    const userIcon = currentUser.type === 'admin' ? 'ğŸ”' : 
                     currentUser.type === 'teacher' ? 'ğŸ‘©â€ğŸ«' : 'ğŸ‘¨â€ğŸ“';
    
    document.getElementById('userDisplay').textContent = `${userIcon} ${currentUser.fullName}`;
    
    if (currentUser.type === 'teacher' || currentUser.type === 'admin') {
      document.getElementById('addContentBtn').style.display = 'flex';
    }

    if (currentUser.type === 'admin') {
      document.getElementById('notificationsTab').style.display = 'flex';
      updateNotificationBadge();
      
      if (window.notificationInterval) {
        clearInterval(window.notificationInterval);
      }
      window.notificationInterval = setInterval(() => {
        updateNotificationBadge();
        if (currentPage === 'notifications') {
          renderNotifications();
        }
      }, 3000);
    }
    
    renderPage(currentPage);
  }

  // ===== NOTIFICATIONS =====
  function addNotification(type, message, relatedData = {}) {
    const notification = {
      id: Date.now(),
      type: type,
      message: message,
      timestamp: new Date().toISOString(),
      read: false,
      relatedData: relatedData
    };
    
    DataManager.addNotification(notification);
    updateNotificationBadge();
  }

  function updateNotificationBadge() {
    if (currentUser && currentUser.type === 'admin') {
      const notifications = DataManager.getNotifications();
      const unreadCount = notifications.filter(n => !n.read).length;
      const badge = document.getElementById('notificationCount');
      
      if (badge) {
        if (unreadCount > 0) {
          badge.textContent = unreadCount;
          badge.style.display = 'flex';
        } else {
          badge.style.display = 'none';
        }
      }
    }
  }

  function markNotificationAsRead(notificationId) {
    const notifications = DataManager.getNotifications();
    const notification = notifications.find(n => n.id === notificationId);
    
    if (notification) {
      notification.read = true;
      DataManager.saveNotifications(notifications);
      updateNotificationBadge();
      renderNotifications();
    }
  }

  function clearAllNotifications() {
    if (confirm('Are you sure you want to clear all notifications?')) {
      DataManager.clearNotifications();
      updateNotificationBadge();
      renderNotifications();
    }
  }

  function renderNotifications() {
    const notifications = DataManager.getNotifications();
    const container = document.getElementById('notificationsContent');
    
    const stats = DataManager.getStats();
    document.getElementById('totalUsers').textContent = stats.users;
    document.getElementById('totalPosts').textContent = stats.posts;
    document.getElementById('totalNotifications').textContent = stats.notifications;
    document.getElementById('storageSize').textContent = stats.storageSize + ' KB';
    
    if (notifications.length === 0) {
      container.innerHTML = '<div class="card"><p>No notifications yet.</p></div>';
      return;
    }

    container.innerHTML = notifications.map(notif => `
      <div class="notification-item ${notif.read ? '' : 'unread'}">
        <div class="notification-header">
          <span class="notification-type">${getNotificationIcon(notif.type)} ${notif.type}</span>
          <span class="notification-time">${formatTimeAgo(notif.timestamp)}</span>
        </div>
        <div class="notification-message">${notif.message}</div>
        ${!notif.read ? `<button class="mark-read-btn" onclick="markNotificationAsRead(${notif.id})">âœ“ Mark as Read</button>` : ''}
      </div>
    `).join('');
    
    updateNotificationBadge();
  }

  function getNotificationIcon(type) {
    const icons = {
      'New Login': 'ğŸ”“',
      'New Registration': 'ğŸ‘¤',
      'New Post': 'ğŸ“',
      'New Comment': 'ğŸ’¬',
      'New Message': 'âœ‰ï¸',
      'Post Deleted': 'ğŸ—‘ï¸'
    };
    return icons[type] || 'ğŸ“Œ';
  }

  function formatTimeAgo(timestamp) {
    const now = new Date();
    const time = new Date(timestamp);
    const diff = Math.floor((now - time) / 1000);

    if (diff < 60) return 'Just now';
    if (diff < 3600) return `${Math.floor(diff / 60)} min ago`;
    if (diff < 86400) return `${Math.floor(diff / 3600)} hrs ago`;
    if (diff < 604800) return `${Math.floor(diff / 86400)} days ago`;
    return time.toLocaleDateString();
  }

  // ===== NAVIGATION =====
  function navigateTo(page) {
    currentPage = page;
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
    
    document.getElementById(page + 'Page').classList.add('active');
    event.target.classList.add('active');
    
    renderPage(page);
  }

  function renderPage(page) {
    if (page === 'news') {
      renderPosts('news', 'newsContent');
    } else if (page === 'students') {
      renderPosts('students', 'studentsContent');
    } else if (page === 'teachers') {
      renderPosts('teachers', 'teachersContent');
    } else if (page === 'notifications') {
      renderNotifications();
    }
  }

  // ===== POSTS =====
  function renderPosts(category, containerId) {
    const posts = DataManager.getPosts();
    const container = document.getElementById(containerId);
    const categoryPosts = posts.filter(p => p.category === category)
                               .sort((a, b) => new Date(b.date) - new Date(a.date));
    
    if (categoryPosts.length === 0) {
      container.innerHTML = '<div class="card"><p>No posts yet. Teachers and admins can add content!</p></div>';
      return;
    }
    
    container.innerHTML = categoryPosts.map(post => {
      const isLiked = post.likedBy && post.likedBy.includes(currentUser?.username);
      const canDelete = currentUser && (currentUser.type === 'admin' || post.author === currentUser.fullName);
      
      return `
        <div class="card">
          <h3>${post.title}</h3>
          <p>${post.content}</p>
          ${post.mediaData ? `
            <div class="media-container">
              ${post.mediaType.startsWith('image') ? 
                `<img src="${post.mediaData}" alt="${post.title}">` : 
                `<video controls><source src="${post.mediaData}" type="${post.mediaType}"></video>`
              }
            </div>
          ` : ''}
          ${post.tags.map(tag => `<span class="badge">${tag}</span>`).join('')}
          <div class="card-meta">
            <span>ğŸ“ ${post.author} â€¢ ğŸ“… ${new Date(post.date).toLocaleDateString()}</span>
            <span>â¤ï¸ ${post.likes} â€¢ ğŸ’¬ ${post.comments.length}</span>
          </div>
          <div class="card-actions">
            <button class="btn-small btn-like ${isLiked ? 'liked' : ''}" onclick="toggleLike(${post.id})">
              ${isLiked ? 'â¤ï¸ Liked' : 'ğŸ¤ Like'}
            </button>
            <button class="btn-small btn-comment" onclick="toggleComments(${post.id})">
              ğŸ’¬ Comment
            </button>
            ${canDelete ? `<button class="btn-small btn-delete" onclick="deletePost(${post.id})">ğŸ—‘ï¸ Delete</button>` : ''}
          </div>
          <div class="comments-section" id="comments-${post.id}">
            ${post.comments.map(c => `
              <div class="comment">
                <div class="comment-author">${c.author}</div>
                <div class="comment-text">${c.text}</div>
                <div class="comment-time">${formatTimeAgo(c.date)}</div>
              </div>
            `).join('')}
            <input type="text" class="comment-input" id="comment-input-${post.id}" placeholder="Write a comment...">
            <button class="btn-small btn-comment" style="margin-top:1rem;" onclick="addComment(${post.id})">Post Comment</button>
          </div>
        </div>
      `;
    }).join('');
  }

  function toggleLike(postId) {
    if (!currentUser) return;
    
    const posts = DataManager.getPosts();
    const post = posts.find(p => p.id === postId);
    if (!post) return;
    
    if (!post.likedBy) post.likedBy = [];
    if (!post.likes) post.likes = 0;
    
    const index = post.likedBy.indexOf(currentUser.username);
    if (index > -1) {
      post.likedBy.splice(index, 1);
      post.likes--;
    } else {
      post.likedBy.push(currentUser.username);
      post.likes++;
    }
    
    DataManager.savePosts(posts);
    renderPage(currentPage);
  }

  function toggleComments(postId) {
    const commentsSection = document.getElementById(`comments-${postId}`);
    commentsSection.classList.toggle('active');
  }

  function addComment(postId) {
    if (!currentUser) return;
    
    const input = document.getElementById(`comment-input-${postId}`);
    const text = input.value.trim();
    
    if (!text) return;
    
    const posts = DataManager.getPosts();
    const post = posts.find(p => p.id === postId);
    if (!post) return;
    
    if (!post.comments) post.comments = [];
    
    const newComment = {
      author: currentUser.fullName,
      text: text,
      date: new Date().toISOString()
    };
    
    post.comments.push(newComment);
    
    addNotification(
      'New Comment',
      `${currentUser.fullName} commented on "${post.title}"`,
      { postId: postId, postTitle: post.title }
    );
    
    DataManager.savePosts(posts);
    input.value = '';
    renderPage(currentPage);
  }

  function deletePost(postId) {
    if (!confirm('Are you sure you want to delete this post?')) return;
    
    const posts = DataManager.getPosts();
    const post = posts.find(p => p.id === postId);
    const postTitle = post ? post.title : 'Unknown Post';
    
    DataManager.deletePost(postId);
    
    addNotification(
      'Post Deleted',
      `${currentUser.fullName} deleted: "${postTitle}"`,
      { postId: postId }
    );
    
    renderPage(currentPage);
  }

  // ===== MODAL =====
  function showAddContentModal() {
    document.getElementById('addContentModal').style.display = 'block';
  }

  function closeAddContentModal() {
    document.getElementById('addContentModal').style.display = 'none';
    document.getElementById('addContentForm').reset();
    removeMedia();
  }

  function previewMedia(event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    
    reader.onload = function(e) {
      currentMediaData = e.target.result;
      currentMediaType = file.type;
      
      const preview = document.getElementById('mediaPreview');
      const imagePreview = document.getElementById('imagePreview');
      const videoPreview = document.getElementById('videoPreview');
      
      preview.style.display = 'block';
      
      if (file.type.startsWith('image/')) {
        imagePreview.src = e.target.result;
        imagePreview.style.display = 'block';
        videoPreview.style.display = 'none';
      } else if (file.type.startsWith('video/')) {
        videoPreview.src = e.target.result;
        videoPreview.style.display = 'block';
        imagePreview.style.display = 'none';
      }
    };
    
    reader.readAsDataURL(file);
  }

  function removeMedia() {
    currentMediaData = null;
    currentMediaType = null;
    document.getElementById('postMedia').value = '';
    document.getElementById('mediaPreview').style.display = 'none';
    document.getElementById('imagePreview').src = '';
    document.getElementById('videoPreview').src = '';
  }

  function handleAddContent(event) {
    event.preventDefault();
    
    if (!currentUser || (currentUser.type !== 'teacher' && currentUser.type !== 'admin')) {
      alert('Only teachers and admins can post!');
      return;
    }
    
    const category = document.getElementById('postCategory').value;
    const title = document.getElementById('postTitle').value;
    const content = document.getElementById('postContent').value;
    const tags = document.getElementById('postTags').value.split(',').map(t => t.trim()).filter(t => t);
    
    const newPost = {
      id: Date.now(),
      category: category,
      title: title,
      content: content,
      tags: tags,
      author: currentUser.fullName,
      date: new Date().toISOString(),
      likes: 0,
      likedBy: [],
      comments: [],
      mediaData: currentMediaData,
      mediaType: currentMediaType
    };
    
    DataManager.addPost(newPost);
    
    addNotification(
      'New Post',
      `${currentUser.fullName} created: "${title}"`,
      { postId: newPost.id, category: category }
    );
    
    closeAddContentModal();
    
    if (category === 'news') navigateTo('news');
    else if (category === 'students') navigateTo('students');
    else if (category === 'teachers') navigateTo('teachers');
  }

  // ===== CONTACT =====
  function handleContactSubmit(event) {
    event.preventDefault();
    
    const name = document.getElementById('contactName').value;
    const email = document.getElementById('contactEmail').value;
    const message = document.getElementById('contactMessage').value;
    
    addNotification(
      'New Message',
      `Message from ${name} (${email})`,
      { name: name, email: email, message: message }
    );
    
    const msg = document.getElementById('contactFormMessage');
    msg.textContent = 'âœ… Message sent successfully!';
    msg.style.display = 'block';
    event.target.reset();
    
    setTimeout(() => {
      msg.style.display = 'none';
    }, 5000);
  }

  // ===== INITIALIZATION =====
  window.addEventListener('DOMContentLoaded', function() {
    StorageManager.initialize();
    
    const savedSession = DataManager.getSession();
    if (savedSession) {
      currentUser = savedSession;
      showMainWebsite();
    }
  });

  window.onclick = function(event) {
    const modal = document.getElementById('addContentModal');
    if (event.target == modal) {
      closeAddContentModal();
    }
  }
</script>

</body>
</html>
